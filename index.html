import React, { useState } from 'react';

const TenModelTradingSystem = () => {
  const [activeModel, setActiveModel] = useState(1);

  const levels = [
    { pct: 100, label: '100% HIGH', color: 'green', zone: 'premium' },
    { pct: 97, label: '97%', color: 'green', zone: 'premium' },
    { pct: 89, label: '89%', color: 'green', zone: 'premium' },
    { pct: 83, label: '83%', color: 'green', zone: 'premium' },
    { pct: 71, label: '71%', color: 'blue', zone: 'flow' },
    { pct: 59, label: '59%', color: 'red', zone: 'rebalance' },
    { pct: 53, label: '53%', color: 'red', zone: 'rebalance' },
    { pct: 50, label: '50% EQ', color: 'yellow', zone: 'equilibrium' },
    { pct: 47, label: '47%', color: 'red', zone: 'rebalance' },
    { pct: 41, label: '41%', color: 'red', zone: 'rebalance' },
    { pct: 29, label: '29%', color: 'blue', zone: 'flow' },
    { pct: 17, label: '17%', color: 'green', zone: 'discount' },
    { pct: 11, label: '11%', color: 'green', zone: 'discount' },
    { pct: 3, label: '3%', color: 'green', zone: 'discount' },
    { pct: 0, label: '0% LOW', color: 'green', zone: 'discount' },
  ];

  const models = {
    1: {
      name: 'OB Premium Sell',
      zone: 'Premium',
      direction: 'SELL',
      color: 'red',
      bgColor: 'bg-red-50',
      borderColor: 'border-red-600',
      levels: '97-89-59',
      steps: [
        '1. Price creates OB between 97-89',
        '2. Short Term Low Raided + MSS',
        '3. Retrace into the OB + Entry',
        '4. SL above swing high, Target 59-50'
      ],
      path: [
        { x: 10, y: 95 }, { x: 20, y: 97 }, { x: 30, y: 92 }, { x: 40, y: 93 },
        { x: 50, y: 89 }, { x: 60, y: 75 }, { x: 70, y: 65 }, { x: 80, y: 59 }
      ],
      entryIdx: 4,
      targetIdx: [6, 7],
      description: 'Order Block selling from premium. Wait for low raid and MSS, then enter on retrace to OB.'
    },
    2: {
      name: 'Stoprun Premium Sell',
      zone: 'Premium',
      direction: 'SELL',
      color: 'red',
      bgColor: 'bg-red-50',
      borderColor: 'border-red-600',
      levels: '1.11-100-71-59',
      steps: [
        '1. Price creates OB between 0.03-97',
        '2. Stoprun above the high (breaches 100)',
        '3. Run through 100 level + MSS',
        '4. Retrace into 100 level + Entry',
        '5. SL above stoprun high, Target 59-50'
      ],
      path: [
        { x: 10, y: 97 }, { x: 20, y: 98 }, { x: 25, y: 102 }, { x: 30, y: 100 },
        { x: 40, y: 95 }, { x: 50, y: 85 }, { x: 60, y: 71 }, { x: 70, y: 62 }, { x: 80, y: 59 }
      ],
      entryIdx: 3,
      targetIdx: [6, 8],
      description: 'Liquidity grab above 100. Enter when price returns after the spike and breaks structure.'
    },
    3: {
      name: 'FVG Premium Sell',
      zone: 'Premium',
      direction: 'SELL',
      color: 'red',
      bgColor: 'bg-red-50',
      borderColor: 'border-red-600',
      levels: '100-89-83-59-50',
      steps: [
        '1. Price creates OB into FVG (89-97)',
        '2. Retrace to FVG + MSS + Prop Block',
        '3. Retrace to FV, breakout of Prop Block',
        '4. Entry on STOP, SL above swing high',
        '5. Target 59-50'
      ],
      path: [
        { x: 10, y: 95 }, { x: 20, y: 89 }, { x: 30, y: 83 }, { x: 40, y: 86 },
        { x: 50, y: 83 }, { x: 60, y: 75 }, { x: 70, y: 65 }, { x: 80, y: 59 }
      ],
      entryIdx: 5,
      targetIdx: [7],
      description: 'Fair Value Gap at premium. Wait for retrace to fill gap, consolidation, then break lower.'
    },
    4: {
      name: 'BR Premium Buy',
      zone: 'Premium',
      direction: 'BUY',
      color: 'green',
      bgColor: 'bg-green-50',
      borderColor: 'border-green-600',
      levels: '59-71-100',
      steps: [
        '1. Price creates BR between 59-71',
        '2. Short Term High Raided + MSS',
        '3. Retrace into the BR + Entry',
        '4. SL below swing low, Target 100'
      ],
      path: [
        { x: 10, y: 65 }, { x: 20, y: 59 }, { x: 30, y: 62 }, { x: 40, y: 71 },
        { x: 50, y: 68 }, { x: 60, y: 71 }, { x: 70, y: 85 }, { x: 80, y: 97 }
      ],
      entryIdx: 5,
      targetIdx: [7],
      description: 'Breaker Block reversal. Failed resistance becomes support for bullish continuation.'
    },
    5: {
      name: 'MB Premium Sell',
      zone: 'Premium',
      direction: 'SELL',
      color: 'red',
      bgColor: 'bg-red-50',
      borderColor: 'border-red-600',
      levels: '50-59-41',
      steps: [
        '1. Price consolidates around 50 EQ',
        '2. Clear BSL and SSL inside MB',
        '3. Sweep OB + Entry inside MB (50-59)',
        '4. SL at swing high, Target 41'
      ],
      path: [
        { x: 10, y: 53 }, { x: 20, y: 50 }, { x: 30, y: 52 }, { x: 40, y: 55 },
        { x: 50, y: 59 }, { x: 60, y: 53 }, { x: 70, y: 47 }, { x: 80, y: 41 }
      ],
      entryIdx: 4,
      targetIdx: [7],
      description: 'Mitigation Block at equilibrium. Sweeps liquidity on both sides before committing.'
    },
    6: {
      name: 'BR Discount Sell',
      zone: 'Discount',
      direction: 'SELL',
      color: 'red',
      bgColor: 'bg-red-50',
      borderColor: 'border-red-600',
      levels: '29-41-0',
      steps: [
        '1. Price creates BR between 41-29',
        '2. Short Term Low raided + MSS',
        '3. Retrace to BR + Entry',
        '4. SL above swing high, Target 0'
      ],
      path: [
        { x: 10, y: 35 }, { x: 20, y: 41 }, { x: 30, y: 38 }, { x: 40, y: 29 },
        { x: 50, y: 32 }, { x: 60, y: 29 }, { x: 70, y: 15 }, { x: 80, y: 3 }
      ],
      entryIdx: 5,
      targetIdx: [7],
      description: 'Bearish continuation in discount. Breaker becomes resistance for further downside.'
    },
    7: {
      name: 'MB Discount Buy',
      zone: 'Discount',
      direction: 'BUY',
      color: 'green',
      bgColor: 'bg-green-50',
      borderColor: 'border-green-600',
      levels: '50-41-59',
      steps: [
        '1. Price consolidates around 50 EQ',
        '2. Clear BSL and SSL inside MB',
        '3. Sweep down to 41 (SSL) + Entry',
        '4. SL at swing low, Target 59'
      ],
      path: [
        { x: 10, y: 47 }, { x: 20, y: 50 }, { x: 30, y: 48 }, { x: 40, y: 45 },
        { x: 50, y: 41 }, { x: 60, y: 47 }, { x: 70, y: 53 }, { x: 80, y: 59 }
      ],
      entryIdx: 4,
      targetIdx: [7],
      description: 'Mitigation Block buy from discount. Sweeps liquidity below, then reverses up.'
    },
    8: {
      name: 'FVG Discount Buy',
      zone: 'Discount',
      direction: 'BUY',
      color: 'green',
      bgColor: 'bg-green-50',
      borderColor: 'border-green-600',
      levels: '0-11-17-41-50',
      steps: [
        '1. Price creates OB into 0 (OB 3-11)',
        '2. Rally out of OB/FV + MSS + Prop Block',
        '3. Retrace to FV, break Prop Block',
        '4. Entry on breakout, SL below',
        '5. Target 41'
      ],
      path: [
        { x: 10, y: 5 }, { x: 20, y: 3 }, { x: 30, y: 11 }, { x: 40, y: 17 },
        { x: 50, y: 14 }, { x: 60, y: 17 }, { x: 70, y: 29 }, { x: 80, y: 41 }
      ],
      entryIdx: 5,
      targetIdx: [7],
      description: 'Fair Value Gap at extreme low. Fill gap, consolidate, then explosive move up.'
    },
    9: {
      name: 'OB Discount Buy',
      zone: 'Discount',
      direction: 'BUY',
      color: 'green',
      bgColor: 'bg-green-50',
      borderColor: 'border-green-600',
      levels: '03-11-41-50',
      steps: [
        '1. Price creates OB between 03-11',
        '2. Short Term High raided + MSS',
        '3. Retrace to OB + Entry',
        '4. SL below MT OB, Target 41-50'
      ],
      path: [
        { x: 10, y: 15 }, { x: 20, y: 11 }, { x: 30, y: 8 }, { x: 40, y: 3 },
        { x: 50, y: 7 }, { x: 60, y: 11 }, { x: 70, y: 29 }, { x: 80, y: 41 }
      ],
      entryIdx: 5,
      targetIdx: [7],
      description: 'Order Block buy from discount. Classic institutional buying zone after structure shift.'
    },
    10: {
      name: 'Stoprun Discount Buy',
      zone: 'Discount',
      direction: 'BUY',
      color: 'green',
      bgColor: 'bg-green-50',
      borderColor: 'border-green-600',
      levels: '-0.11-0-03-29-41',
      steps: [
        '1. Price creates OB between 0.03-97',
        '2. Stoprun below low (breaches 0)',
        '3. Run through 00 level + MSS',
        '4. Retrace into 00 level + Entry',
        '5. SL below swing low, Target 29-41'
      ],
      path: [
        { x: 10, y: 3 }, { x: 20, y: 2 }, { x: 25, y: -2 }, { x: 30, y: 0 },
        { x: 40, y: 5 }, { x: 50, y: 15 }, { x: 60, y: 29 }, { x: 70, y: 38 }, { x: 80, y: 41 }
      ],
      entryIdx: 3,
      targetIdx: [6, 8],
      description: 'Liquidity grab below 0. Spring/shakeout pattern with sharp reversal upward.'
    }
  };

  const currentModel = models[activeModel];

  return (
    <div className="w-full min-h-screen bg-gray-900 p-4">
      <div className="max-w-7xl mx-auto bg-white rounded-xl p-6">
        <h1 className="text-4xl font-bold text-center mb-2 text-blue-900">
          10 TRADING MODELS - PREMIUM & DISCOUNT
        </h1>
        <p className="text-center text-gray-600 mb-6">
          Smart Money Concepts - Institutional Trading System
        </p>

        {/* Model Selector */}
        <div className="grid grid-cols-2 md:grid-cols-5 gap-3 mb-6">
          {Object.keys(models).map((key) => {
            const model = models[key];
            const isActive = activeModel === parseInt(key);
            return (
              <button
                key={key}
                onClick={() => setActiveModel(parseInt(key))}
                className={`p-3 rounded-lg font-semibold text-sm transition-all ${
                  isActive
                    ? `${model.borderColor} border-4 ${model.bgColor} scale-105 shadow-lg`
                    : 'border-2 border-gray-300 bg-gray-50 hover:border-gray-400'
                }`}
              >
                <div className="text-xs text-gray-600">Model {key}</div>
                <div className="font-bold">{model.name.split(' ')[0]}</div>
                <div className={`text-xs ${model.direction === 'BUY' ? 'text-green-600' : 'text-red-600'}`}>
                  {model.direction}
                </div>
              </button>
            );
          })}
        </div>

        {/* Main Chart */}
        <div className={`${currentModel.bgColor} ${currentModel.borderColor} border-4 rounded-xl p-6 mb-6`}>
          <div className="text-center mb-4">
            <h2 className="text-2xl font-bold">
              MODEL {activeModel}: {currentModel.name}
            </h2>
            <div className="flex justify-center gap-4 mt-2 text-sm">
              <span className="font-semibold">Zone: {currentModel.zone}</span>
              <span className={`font-bold ${currentModel.direction === 'BUY' ? 'text-green-600' : 'text-red-600'}`}>
                {currentModel.direction}
              </span>
              <span>Levels: {currentModel.levels}</span>
            </div>
          </div>

          {/* Chart Area */}
          <div className="bg-white border-4 border-black rounded-lg p-4 relative" style={{ height: '500px' }}>
            {/* Horizontal Level Lines */}
            {levels.map((level) => {
              let colorClass = 'border-gray-400 text-gray-600';
              if (level.zone === 'premium') colorClass = 'border-green-500 text-green-700';
              if (level.zone === 'discount') colorClass = 'border-green-500 text-green-700';
              if (level.zone === 'flow') colorClass = 'border-blue-500 text-blue-700';
              if (level.zone === 'rebalance') colorClass = 'border-red-500 text-red-700';
              if (level.zone === 'equilibrium') colorClass = 'border-yellow-500 text-yellow-700';

              const isThick = level.pct === 100 || level.pct === 0 || level.pct === 50 || level.pct === 71 || level.pct === 29;

              return (
                <div
                  key={level.pct}
                  className={`absolute left-0 right-0 border-t-2 ${isThick ? 'border-solid' : 'border-dashed'} ${colorClass}`}
                  style={{ bottom: `${level.pct}%` }}
                >
                  <span className="absolute left-2 -top-3 bg-white px-1 text-xs font-bold">
                    {level.label}
                  </span>
                </div>
              );
            })}

            {/* Price Path */}
            <svg className="absolute inset-0 w-full h-full pointer-events-none" style={{ overflow: 'visible' }}>
              {/* Path Lines */}
              {currentModel.path.map((point, idx) => {
                if (idx === currentModel.path.length - 1) return null;
                const next = currentModel.path[idx + 1];
                const x1 = `${point.x}%`;
                const y1 = `${100 - point.y}%`;
                const x2 = `${next.x}%`;
                const y2 = `${100 - next.y}%`;
                const isUp = next.y > point.y;
                
                return (
                  <line
                    key={idx}
                    x1={x1}
                    y1={y1}
                    x2={x2}
                    y2={y2}
                    stroke={isUp ? '#10b981' : '#ef4444'}
                    strokeWidth="3"
                    opacity="0.8"
                  />
                );
              })}

              {/* Points */}
              {currentModel.path.map((point, idx) => {
                let label = '';
                let color = '#6b7280';
                let size = 6;

                if (idx === currentModel.entryIdx) {
                  label = 'ENTRY';
                  color = '#22c55e';
                  size = 10;
                }
                if (currentModel.targetIdx && currentModel.targetIdx.includes(idx)) {
                  label = 'T' + (currentModel.targetIdx.indexOf(idx) + 1);
                  color = '#f59e0b';
                  size = 10;
                }

                return (
                  <g key={idx}>
                    <circle
                      cx={`${point.x}%`}
                      cy={`${100 - point.y}%`}
                      r={size}
                      fill={color}
                      stroke="white"
                      strokeWidth="2"
                    />
                    {label && (
                      <text
                        x={`${point.x}%`}
                        y={`${100 - point.y - 4}%`}
                        textAnchor="middle"
                        fontSize="10"
                        fontWeight="bold"
                        fill={color}
                      >
                        {label}
                      </text>
                    )}
                  </g>
                );
              })}
            </svg>
          </div>
        </div>

        {/* Setup Instructions */}
        <div className="grid md:grid-cols-2 gap-6">
          <div className="bg-blue-50 border-2 border-blue-600 rounded-xl p-6">
            <h3 className="text-xl font-bold text-blue-900 mb-4">ðŸ“‹ SETUP STEPS</h3>
            <ol className="space-y-2">
              {currentModel.steps.map((step, idx) => (
                <li key={idx} className="flex gap-3 bg-white p-2 rounded">
                  <span className="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0">
                    {idx + 1}
                  </span>
                  <span className="text-sm">{step}</span>
                </li>
              ))}
            </ol>
          </div>

          <div className="space-y-4">
            <div className="bg-yellow-50 border-2 border-yellow-600 rounded-lg p-4">
              <h4 className="font-bold text-yellow-900 mb-2">ðŸ’¡ DESCRIPTION</h4>
              <p className="text-sm text-yellow-900">{currentModel.description}</p>
            </div>

            <div className="bg-purple-50 border-2 border-purple-600 rounded-lg p-4">
              <h4 className="font-bold text-purple-900 mb-2">ðŸŽ¯ KEY CONCEPTS</h4>
              <div className="text-xs text-purple-900 space-y-1">
                <p><strong>MSS:</strong> Market Structure Shift</p>
                <p><strong>OB:</strong> Order Block (institutional zones)</p>
                <p><strong>FVG:</strong> Fair Value Gap (imbalance)</p>
                <p><strong>BR:</strong> Breaker Block (failed S/R)</p>
                <p><strong>MB:</strong> Mitigation Block (rebalance)</p>
                <p><strong>BSL/SSL:</strong> Buy/Sell Side Liquidity</p>
              </div>
            </div>
          </div>
        </div>

        {/* Legend */}
        <div className="mt-6 bg-gray-50 border-2 border-gray-300 rounded-lg p-4">
          <h4 className="font-bold text-gray-900 mb-3 text-center">ZONE LEGEND</h4>
          <div className="grid grid-cols-2 md:grid-cols-5 gap-2 text-xs">
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-green-500 border-2 border-green-700"></div>
              <span>Premium/Discount (Sell/Buy)</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-blue-500 border-2 border-blue-700"></div>
              <span>Flow Gates (71% & 29%)</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-red-500 border-2 border-red-700"></div>
              <span>Rebalance Zone</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-yellow-500 border-2 border-yellow-700"></div>
              <span>Equilibrium (50%)</span>
            </div>
            <div className="flex items-center gap-2">
              <div className="w-4 h-4 bg-gray-400 border-2 border-gray-600"></div>
              <span>Reference Levels</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default TenModelTradingSystem;
